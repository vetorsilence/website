/*! Built with http://stenciljs.com */
const{h,Context}=window.App;import{matchPath}from"./chunk1.js";class Route{constructor(){this.unsubscribe=(()=>{}),this.componentProps={},this.exact=!1,this.group=null,this.routeRender=null,this.match=null}computeMatch(t){t||(t=this.activeRouter.get("location").pathname);const e=matchPath(t,{path:this.url,exact:this.exact,strict:!0});if(e){if(this.group&&this.activeRouter.didGroupAlreadyMatch(this.group))return null;this.group&&this.activeRouter.setGroupMatched(this.group)}return e}componentWillLoad(){this.group&&this.activeRouter.addToGroup(this,this.group),this.unsubscribe=this.activeRouter.subscribe(()=>{this.match=this.computeMatch()}),this.match=this.computeMatch()}componentDidUnload(){this.activeRouter.removeFromGroups(this),this.unsubscribe()}render(){if(!this.activeRouter||!this.match)return null;const t=Object.assign({},this.componentProps,{history:this.activeRouter.get("history"),match:this.match});if(this.routeRender)return this.routeRender(Object.assign({},t,{component:this.component}));if(this.component){const e=this.component;return h(e,Object.assign({},t))}}static get is(){return"stencil-route"}static get properties(){return{activeRouter:{context:"activeRouter"},component:{type:String,attr:"component"},componentProps:{type:"Any",attr:"component-props"},exact:{type:Boolean,attr:"exact"},group:{type:String,attr:"group"},location:{context:"location"},match:{state:!0},routeRender:{type:"Any",attr:"route-render"},url:{type:"Any",attr:"url"}}}}function hasBasename(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function stripBasename(t,e){return hasBasename(t,e)?t.substr(e.length):t}function stripTrailingSlash(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function addLeadingSlash(t){return"/"===t.charAt(0)?t:"/"+t}function stripLeadingSlash(t){return"/"===t.charAt(0)?t.substr(1):t}function parsePath(t){let e=t||"/",n="",a="";const o=e.indexOf("#");-1!==o&&(a=e.substr(o),e=e.substr(0,o));const s=e.indexOf("?");return-1!==s&&(n=e.substr(s),e=e.substr(0,s)),{pathname:e,search:"?"===n?"":n,hash:"#"===a?"":a}}function createPath(t){const{pathname:e,search:n,hash:a}=t;let o=e||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:`?${n}`),a&&"#"!==a&&(o+="#"===a.charAt(0)?a:`#${a}`),o}function parseQueryString(t){return t?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce((t,e)=>{let[n,a]=e.split("=");return t[n]=a?decodeURIComponent(a.replace(/\+/g," ")):"",t},{}):{}}function isAbsolute(t){return"/"===t.charAt(0)}function spliceOne(t,e){for(let n=e,a=n+1,o=t.length;a<o;n+=1,a+=1)t[n]=t[a];t.pop()}function resolvePathname(t,e=""){const n=t&&t.split("/")||[];let a=e&&e.split("/")||[];const o=t&&isAbsolute(t),s=e&&isAbsolute(e),i=o||s;if(t&&isAbsolute(t)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";let r;if(a.length){const t=a[a.length-1];r="."===t||".."===t||""===t}else r=!1;let h=0;for(let t=a.length;t>=0;t--){const e=a[t];"."===e?spliceOne(a,t):".."===e?(spliceOne(a,t),h++):h&&(spliceOne(a,t),h--)}if(!i)for(;h--;h)a.unshift("..");!i||""===a[0]||a[0]&&isAbsolute(a[0])||a.unshift("");let c=a.join("/");return r&&"/"!==c.substr(-1)&&(c+="/"),c}function valueEqual(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return valueEqual(t,e[n])});const n=typeof t;if(n!==typeof e)return!1;if("object"===n){const n=t.valueOf(),a=e.valueOf();if(n!==t||a!==e)return valueEqual(n,a);const o=Object.keys(t),s=Object.keys(e);return o.length===s.length&&o.every(function(n){return valueEqual(t[n],e[n])})}return!1}function locationsAreEqual(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&valueEqual(t.state,e.state)}function createLocation(t,e,n,a){let o;"string"==typeof t?(o=parsePath(t)).state=e:(void 0===(o=Object.assign({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(o.key=n),a?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=resolvePathname(o.pathname,a.pathname)):o.pathname=a.pathname:o.pathname||(o.pathname="/"),o.query=parseQueryString(o.search),o}function invariant(t,...e){t||console.error(...e)}function warning(t,...e){t||console.warn(...e)}const createTransitionManager=()=>{let t;let e=[];return{setPrompt:e=>(warning(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,n,a,o)=>{if(null!=t){const s="function"==typeof t?t(e,n):t;"string"==typeof s?"function"==typeof a?a(s,o):(warning(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==s)}else o(!0)},appendListener:t=>{let n=!0;const a=(...e)=>{n&&t(...e)};return e.push(a),()=>{n=!1,e=e.filter(t=>t!==a)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),addEventListener=(t,e,n)=>t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n),removeEventListener=(t,e,n)=>t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n),getConfirmation=(t,e)=>e(window.confirm(t)),supportsHistory=()=>{const t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},supportsPopStateOnHashChange=()=>-1===window.navigator.userAgent.indexOf("Trident"),supportsGoWithoutReloadUsingHash=()=>-1===window.navigator.userAgent.indexOf("Firefox"),isExtraneousPopstateEvent=t=>void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS"),PopStateEvent="popstate",HashChangeEvent="hashchange",getHistoryState=()=>{try{return window.history.state||{}}catch(t){return{}}},createBrowserHistory=(t={})=>{invariant(canUseDOM,"Browser history needs a DOM");const e=window.history,n=supportsHistory(),a=!supportsPopStateOnHashChange(),{forceRefresh:o=!1,getUserConfirmation:s=getConfirmation,keyLength:i=6}=t,r=t.basename?stripTrailingSlash(addLeadingSlash(t.basename)):"",h=t=>{t=t||{};const{key:e,state:n}=t,{pathname:a,search:o,hash:s}=window.location;let i=a+o+s;return warning(!r||hasBasename(i,r),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+r+'".'),r&&(i=stripBasename(i,r)),createLocation(i,n,e)},c=()=>Math.random().toString(36).substr(2,i),l=createTransitionManager(),u=t=>{Object.assign(x,t),x.length=e.length,l.notifyListeners(x.location,x.action)},p=t=>{isExtraneousPopstateEvent(t)||f(h(t.state))},d=()=>{f(h(getHistoryState()))};let g=!1;const f=t=>{if(g)g=!1,u();else{const e="POP";l.confirmTransitionTo(t,e,s,n=>{n?u({action:e,location:t}):m(t)})}},m=t=>{const e=x.location;let n=w.indexOf(e.key);-1===n&&(n=0);let a=w.indexOf(t.key);-1===a&&(a=0);const o=n-a;o&&(g=!0,b(o))},y=h(getHistoryState());let w=[y.key];const v=t=>r+createPath(t),b=t=>{e.go(t)};let P=0;const O=t=>{1===(P+=t)?(addEventListener(window,"popstate",p),a&&addEventListener(window,"hashchange",d)):0===P&&(removeEventListener(window,"popstate",p),a&&removeEventListener(window,"hashchange",d))};let S=!1;const x={length:e.length,action:"POP",location:y,createHref:v,push:(t,a)=>{warning(!("object"==typeof t&&void 0!==t.state&&void 0!==a),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const i=createLocation(t,a,c(),x.location);l.confirmTransitionTo(i,"PUSH",s,t=>{if(!t)return;const a=v(i),{key:s,state:r}=i;if(n)if(e.pushState({key:s,state:r},null,a),o)window.location.href=a;else{const t=w.indexOf(x.location.key),e=w.slice(0,-1===t?0:t+1);e.push(i.key),w=e,u({action:"PUSH",location:i})}else warning(void 0===r,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=a})},replace:(t,a)=>{warning(!("object"==typeof t&&void 0!==t.state&&void 0!==a),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const i=createLocation(t,a,c(),x.location);l.confirmTransitionTo(i,"REPLACE",s,t=>{if(!t)return;const a=v(i),{key:s,state:r}=i;if(n)if(e.replaceState({key:s,state:r},null,a),o)window.location.replace(a);else{const t=w.indexOf(x.location.key);-1!==t&&(w[t]=i.key),u({action:"REPLACE",location:i})}else warning(void 0===r,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(a)})},go:b,goBack:()=>b(-1),goForward:()=>b(1),block:(t="")=>{const e=l.setPrompt(t);return S||(O(1),S=!0),()=>(S&&(S=!1,O(-1)),e())},listen:t=>{const e=l.appendListener(t);return O(1),()=>{O(-1),e()}}};return x},HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+stripLeadingSlash(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}},getHashPath=()=>{const t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},pushHashPath=t=>window.location.hash=t,replaceHashPath=t=>{const e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},createHashHistory=(t={})=>{invariant(canUseDOM,"Hash history needs a DOM");const e=window.history,n=supportsGoWithoutReloadUsingHash(),{getUserConfirmation:a=getConfirmation,hashType:o="slash"}=t,s=t.basename?stripTrailingSlash(addLeadingSlash(t.basename)):"",{encodePath:i,decodePath:r}=HashPathCoders[o],h=()=>{let t=r(getHashPath());return warning(!s||hasBasename(t,s),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+s+'".'),s&&(t=stripBasename(t,s)),createLocation(t)},c=createTransitionManager(),l=t=>{Object.assign(x,t),x.length=e.length,c.notifyListeners(x.location,x.action)};let u=!1,p=null;const d=()=>{const t=getHashPath(),e=i(t);if(t!==e)replaceHashPath(e);else{const t=h(),e=x.location;if(!u&&locationsAreEqual(e,t))return;if(p===createPath(t))return;p=null,g(t)}},g=t=>{if(u)u=!1,l();else{const e="POP";c.confirmTransitionTo(t,e,a,n=>{n?l({action:e,location:t}):f(t)})}},f=t=>{const e=x.location;let n=v.lastIndexOf(createPath(e));-1===n&&(n=0);let a=v.lastIndexOf(createPath(t));-1===a&&(a=0);const o=n-a;o&&(u=!0,b(o))},m=getHashPath(),y=i(m);m!==y&&replaceHashPath(y);const w=h();let v=[createPath(w)];const b=t=>{warning(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)};let P=0;const O=t=>{1===(P+=t)?addEventListener(window,"hashchange",d):0===P&&removeEventListener(window,"hashchange",d)};let S=!1;const x={length:e.length,action:"POP",location:w,createHref:t=>"#"+i(s+createPath(t)),push:(t,e)=>{warning(void 0===e,"Hash history cannot push state; it is ignored");const n=createLocation(t,void 0,void 0,x.location);c.confirmTransitionTo(n,"PUSH",a,t=>{if(!t)return;const e=createPath(n),a=i(s+e);if(getHashPath()!==a){p=e,pushHashPath(a);const t=v.lastIndexOf(createPath(x.location)),o=v.slice(0,-1===t?0:t+1);o.push(e),v=o,l({action:"PUSH",location:n})}else warning(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),l()})},replace:(t,e)=>{warning(void 0===e,"Hash history cannot replace state; it is ignored");const n=createLocation(t,void 0,void 0,x.location);c.confirmTransitionTo(n,"REPLACE",a,t=>{if(!t)return;const e=createPath(n),a=i(s+e);getHashPath()!==a&&(p=e,replaceHashPath(a));const o=v.indexOf(createPath(x.location));-1!==o&&(v[o]=e),l({action:"REPLACE",location:n})})},go:b,goBack:()=>b(-1),goForward:()=>b(1),block:(t="")=>{const e=c.setPrompt(t);return S||(O(1),S=!0),()=>(S&&(S=!1,O(-1)),e())},listen:t=>{const e=c.appendListener(t);return O(1),()=>{O(-1),e()}}};return x},HISTORIES={browser:createBrowserHistory,hash:createHashHistory};class Router{constructor(){this.root="/",this.historyType="browser",this.titleSuffix="",this.unsubscribe=(()=>{}),this.match=null}titleSuffixChanged(t){this.activeRouter.set({titleSuffix:t})}computeMatch(t){return{path:this.root,url:this.root,isExact:t===this.root,params:{}}}componentWillLoad(){const t=HISTORIES[this.historyType]();t.listen(t=>{this.activeRouter.set({location:this.getLocation(t)})}),this.activeRouter.set({location:this.getLocation(t.location),titleSuffix:this.titleSuffix,root:this.root,history:t}),this.unsubscribe=this.activeRouter.subscribe(()=>{this.match=this.computeMatch()}),this.match=this.computeMatch()}getLocation(t){const e=0==t.pathname.indexOf(this.root)?"/"+t.pathname.slice(this.root.length):t.pathname;return Object.assign({},t,{pathname:e})}componentDidUnload(){this.unsubscribe()}render(){return h("slot",null)}static get is(){return"stencil-router"}static get properties(){return{activeRouter:{context:"activeRouter"},historyType:{type:"Any",attr:"history-type"},match:{state:!0},root:{type:String,attr:"root"},titleSuffix:{type:String,attr:"title-suffix",watchCallbacks:["titleSuffixChanged"]}}}}class MyApp{render(){return h("div",null,h("header",null,h("h1",null,"Stencil App Starter")),h("main",null,h("stencil-router",null,h("stencil-route",{url:"/",component:"app-home",exact:!0}),h("stencil-route",{url:"/profile/:name",component:"app-profile"}))))}static get is(){return"my-app"}static get style(){return"header{background:#5851ff;color:#fff;height:56px;display:flex;align-items:center;box-shadow:0 2px 5px 0 rgba(0,0,0,.26)}h1{font-size:1.4rem;font-weight:500;color:#fff;padding:0 12px}"}}export{Route as StencilRoute,Router as StencilRouter,MyApp};